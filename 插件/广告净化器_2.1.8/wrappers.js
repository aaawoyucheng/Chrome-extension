var injectPageScriptAPI=function(e){"use strict";var t=function(){var e=window.postMessage,t=window.addEventListener,n=0,o={},r=function(e){if(e.data&&e.data.direction&&"to-page-script@yiclear"===e.data.direction){var t=o[e.data.requestId];if(t){var n=t.wrapper;t.onResponseReceived(n,e.data.block),delete o[e.data.requestId]}}},i=function(i,c,a,s){0===n&&t.call(window,"message",r,!1);var d=++n;o[d]={wrapper:a,onResponseReceived:s};var u={requestId:d,direction:"from-page-script@yiclear",elementUrl:i,documentUrl:document.URL,requestType:c};e.call(window,u,"*")};return{sendMessage:i}}();e.copyProperties=function(e,t,n){for(var o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&Object.defineProperty(t,r,i)}},e.checkRequest=function(e,n,o){t.sendMessage(e,n,this,function(e,t){o(t)})}},overrideWebSocket=function(e){"use strict";function t(r,i){if(!(this instanceof t))return n();if(arguments.length<1)return new n;var c=new n(r,i);return e.checkRequest(c.url,"WEBSOCKET",function(e){e&&o(c)}),c}if(!(window.WebSocket instanceof Function))return!1;var n=WebSocket,o=Function.prototype.call.bind(n.prototype.close);t.prototype=n.prototype,window.WebSocket=t.bind(),e.copyProperties(n,WebSocket,["CONNECTING","OPEN","CLOSING","CLOSED","name","prototype"]),n.prototype.constructor=WebSocket},overrideWebRTC=function(e){"use strict";function t(t,n){function o(n){e.checkRequest(n,"WEBRTC",function(e){if(e)try{r(t)}catch(e){}})}if(n&&n.iceServers)for(var c=n.iceServers,a=0;a<c.length;a++){var s=c[a];if(s&&s.urls){var d=s.urls;d instanceof i||(d=[d]);for(var u=0;u<d.length;u++){var p=d[u];"string"!=typeof p&&(p=p.toString()),o(p)}}}}function n(e){if(!(this instanceof n))return o();var r=new o(e);return t(r,e),r}if(window.RTCPeerConnection instanceof Function||window.webkitRTCPeerConnection instanceof Function){var o=window.RTCPeerConnection||window.webkitRTCPeerConnection,r=Function.prototype.call.bind(o.prototype.close),i=Array;if(o.prototype.setConfiguration){var c=Function.prototype.call.bind(o.prototype.setConfiguration);o.prototype.setConfiguration=function(e){c(this,e),t(this,e)}}n.prototype=o.prototype;var a=n.bind();e.copyProperties(o,a,["caller","generateCertificate","name","prototype"]),o.prototype.constructor=a,"RTCPeerConnection"in window&&(window.RTCPeerConnection=a),"webkitRTCPeerConnection"in window&&(window.webkitRTCPeerConnection=a)}},initPageMessageListener=function(){"use strict";function e(e){if(e.source===window&&e.data.direction&&"from-page-script@yiclear"===e.data.direction&&e.data.elementUrl&&e.data.documentUrl){var t={type:"checkPageScriptWrapperRequest",elementUrl:e.data.elementUrl,documentUrl:e.data.documentUrl,requestType:e.data.requestType,requestId:e.data.requestId};contentPage.sendMessage(t,function(t){if(t){var n={direction:"to-page-script@yiclear",elementUrl:e.data.elementUrl,documentUrl:e.data.documentUrl,requestType:e.data.requestType,requestId:t.requestId,block:t.block};e.source.postMessage(n,e.origin)}})}}window.addEventListener("message",e,!1)};
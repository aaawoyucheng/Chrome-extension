!function(e){e.RequestTypes={DOCUMENT:"DOCUMENT",SUBDOCUMENT:"SUBDOCUMENT",SCRIPT:"SCRIPT",STYLESHEET:"STYLESHEET",OBJECT:"OBJECT",IMAGE:"IMAGE",XMLHTTPREQUEST:"XMLHTTPREQUEST",OBJECT_SUBREQUEST:"OBJECT-SUBREQUEST",MEDIA:"MEDIA",FONT:"FONT",OTHER:"OTHER",WEBRTC:"WEBRTC",WEBSOCKET:"WEBSOCKET",POPUP:"POPUP",isVisual:function(e){return e==this.DOCUMENT||e==this.SUBDOCUMENT||e==this.OBJECT||e==this.IMAGE}},e.LogEvents={TAB_ADDED:"log.tab.added",TAB_CLOSE:"log.tab.close",TAB_UPDATE:"log.tab.update",TAB_RESET:"log.tab.reset",EVENT_ADDED:"log.event.added",EVENT_UPDATE:"log.event.update"},e.EventNotifierTypes={ADD_RULE:"event.add.rule",ADD_RULES:"event.add.rules",REMOVE_RULE:"event.remove.rule",UPDATE_FILTER_RULES:"event.update.filter.rules",DISABLE_FILTER:"event.disable.filter",ENABLE_FILTER:"event.enable.filter",ADD_FILTER:"event.add.filter",REMOVE_FILTER:"event.remove.filter",ADS_BLOCKED:"event.ads.blocked",ENABLE_FILTERING:"event.enable.filtering",DISABLE_FILTERING:"event.disable.filtering",START_DOWNLOAD_FILTER:"event.start.download.filter",SUCCESS_DOWNLOAD_FILTER:"event.success.download.filter",ERROR_DOWNLOAD_FILTER:"event.error.download.filter",ENABLE_FILTER_SHOW_POPUP:"event.enable.filter.show.popup",LOG_EVENT:"event.log.track",UPDATE_TAB_BUTTON_STATE:"event.update.tab.button.state",REQUEST_FILTER_UPDATED:"event.request.filter.updated",CHANGE_USER_SETTINGS:"event.change.user.settings",CHANGE_PREFS:"event.change.prefs",UPDATE_FILTERS_SHOW_POPUP:"event.update.filters.show.popup",UPDATE_USER_FILTER_RULES:"event.update.user.filter.rules",UPDATE_WHITELIST_FILTER_RULES:"event.update.whitelist.filter.rules",CONTENT_BLOCKER_UPDATED:"event.content.blocker.updated"},e.AntiBannerFiltersId={USER_FILTER_ID:0,YICLEAR_FILTER_ID:3,WHITE_LIST_FILTER_ID:100,YICLEAR_DEF_ID:111},e.platformUtils={navigator:e.Cc["@mozilla.org/network/protocol;1?name=http"].getService(e.Ci.nsIHttpProtocolHandler),objectContentTypes:".jar.swf.",mediaContentTypes:".mp4.flv.avi.m3u.webm.mpeg.3gp.3gpp.3g2.3gpp2.ogg.mov.qt.",fontContentTypes:".ttf.otf.woff.woff2.eot.",imageContentTypes:".ico.png.gif.jpg.jpeg.webp.",isWindowsOs:function(){return this.navigator.userAgent.toLowerCase().indexOf("win")>=0},isMacOs:function(){return this.navigator.platform.toUpperCase().indexOf("MAC")>=0},isEdgeBrowser:function(){return"Edge"===yiclearAPI.Prefs.getBrowser()},isFirefoxBrowser:function(){return"Firefox"==yiclearAPI.Prefs.getBrowser()||"Android"==yiclearAPI.Prefs.getBrowser()},isSafariBrowser:function(){return"Safari"==yiclearAPI.Prefs.getBrowser()},isContentBlockerEnabled:function(){return!("undefined"==typeof safari||!this.isSafari9Plus())&&("undefined"==typeof this._useOldSafariAPI&&(this._useOldSafariAPI="true"==String(safari.extension.settings.getItem("useOldSafariAPI"))),!this._useOldSafariAPI)},isShadowDomSupported:function(){return"chromium"==yiclearAPI.Prefs.platform||"sogou"==yiclearAPI.Prefs.platform},isGreaterVersion:function(t,r){var n=new e.Version(t),i=new e.Version(r);return n.compare(i)>0},findHeaderByName:function(e,t){if(e)for(var r=0;r<e.length;r++){var n=e[r];if(n.name===t)return n}return null},setHeaderValue:function(e,t,r){e||(e=[]);var n=this.findHeaderByName(e,t);return n?n.value=r:e.push({name:t,value:r}),e},parseContentTypeFromUrlPath:function(t){var r=t.slice(-6),n=r.lastIndexOf(".");return n===-1?null:(r=r.slice(n)+".",this.objectContentTypes.indexOf(r)!==-1?e.RequestTypes.OBJECT:this.mediaContentTypes.indexOf(r)!==-1?e.RequestTypes.MEDIA:this.fontContentTypes.indexOf(r)!==-1?e.RequestTypes.FONT:this.imageContentTypes.indexOf(r)!==-1?e.RequestTypes.IMAGE:null)},debounce:function(e,t){var r;return function(){var n=this,i=arguments,s=function(){r=null,e.apply(n,i)};clearTimeout(r),r=setTimeout(s,t)}},EDGE_CREATORS_UPDATE:15063,isEdgeBeforeCreatorsUpdate:function(){return this.isEdgeBrowser()}},e.Version=function(e){function t(e){return isNaN(e)?0:Math.max(e-0,0)}this.version=Object.create(null);for(var r=(e||"").split("."),n=3;n>=0;n--)this.version[n]=t(r[n])},e.Version.prototype.compare=function(e){for(var t=0;t<4;t++){if(this.version[t]>e.version[t])return 1;if(this.version[t]<e.version[t])return-1}return 0},e.Utils={getAppVersion:function(){return e.LocalStorage.getItem("app-version")},setAppVersion:function(t){e.LocalStorage.setItem("app-version",t)}},e.SimpleRegex=function(){var e={maskStartUrl:"||",maskPipe:"|",maskSeparator:"^",maskAnySymbol:"*",regexAnySymbol:".*",regexSeparator:"([^ a-zA-Z0-9.%]|$)",regexStartUrl:"^(http|https|ws|wss)://([a-z0-9-_.]+\\.)?",regexStartString:"^",regexEndString:"$"},t=[".","+","?","$","{","}","(",")","[","]","\\","/"],r=new RegExp("["+t.join("\\")+"]","g"),n=function(e){return e.replace(r,"\\$&")},i=function(e,t){return e&&0===e.indexOf(t)},s=function(e,t){if(!e||!t)return!1;if(e.endsWith)return e.endsWith(t);var r=String(t),n=e.lastIndexOf(r);return n>=0&&n===e.length-r.length},a=function(e,t,r){return e?e.split(t).join(r):e},o=function(t){var r=n(t);return r=i(r,e.maskStartUrl)?r.substring(0,e.maskStartUrl.length)+a(r.substring(e.maskStartUrl.length,r.length-1),"|","\\|")+r.substring(r.length-1):i(r,e.maskPipe)?r.substring(0,e.maskPipe.length)+a(r.substring(e.maskPipe.length,r.length-1),"|","\\|")+r.substring(r.length-1):a(r.substring(0,r.length-1),"|","\\|")+r.substring(r.length-1),r=a(r,e.maskAnySymbol,e.regexAnySymbol),r=a(r,e.maskSeparator,e.regexSeparator),i(r,e.maskStartUrl)?r=e.regexStartUrl+r.substring(e.maskStartUrl.length):i(r,e.maskPipe)&&(r=e.regexStartString+r.substring(e.maskPipe.length)),s(r,e.maskPipe)&&(r=r.substring(0,r.length-1)+e.regexEndString),r};return{createRegex:o,regexConfiguration:e}}()}(vAPI);
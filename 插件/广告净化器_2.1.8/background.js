var yiclear=function(){"use strict";var e=window.yiclearAPI||{},n=window.vAPI.ext||{},r=e.UI,i=new e.BlockService,t=new e.FramesMap(i,BrowserTabs),a=new e.YiclearApplication(t),s=new e.FilteringLog(BrowserTabs,t,r),o=new e.WebRequestService(t,i,s,a),l=new vAPI.ContentMessageHandler,c=function(e,n){e.tab.sendMessage(n)},d=function(e,n,r){var i=l.handleMessage(e,n,r),t=i===!0;return t||r(i),t},u=function(){a.serviceClient.yiclearFilterUpdate(function(e){if(e.compress,yiclearAPI.compress=e.compress,""!==e.FilterUpdateUrl)for(var n=i.yiclearFilters,r=0;r<n.length;r++)n[r].filterId==e.FilterId&&(i.yiclearFilters[r].subscriptionUrl=e.FilterUpdateUrl,(Number(n[r].version)<e.FilterVersion||"undefined"==typeof n[r].version)&&yiclearAPI.userSettings.autoUpdate()&&i._autoUpdateFilterUrl(i.yiclearFilters[r],e.FilterVersion))}.bind(this))};return i.init({runCallback:function(e){e.isFirstRun&&r.openInstallPage()}}),e.filterRulesHitCount.setAntiBannerService(i),l.init(o,i,t,s,a,r),l.setSendMessageToSender(c),n.onMessage.addListener(d),n.tabs.onRemoved.addListener(function(e){t.removeFrame(e)}),n.tabs.onCreated.addListener(function(e){s.addTab(e),t.checkTabIncognitoMode(e)}),n.tabs.onUpdated.addListener(function(e){s.updateTab(e)}),n.tabs.onRemoved.addListener(function(e){s.removeTab(e)}),r.getAllOpenedTabs(function(e){for(var n=0;n<e.length;n++){var r=e[n];t.recordFrame(r,0,r.url,vAPI.RequestTypes.DOCUMENT),t.checkTabIncognitoMode(r)}}),r.bindEvents(),window.setTimeout(u,1e4),{webRequestService:o,framesMap:t,antiBannerService:i,filteringLog:s}};yiclear=new yiclear;
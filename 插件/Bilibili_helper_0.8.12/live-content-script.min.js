/*! bilibili-helper-master 2016-07-17 */
var Live={setInterval:function(a,b,c){var d=setInterval(function(){a&&"function"==typeof b&&(b(),clearInterval(d))},c)},set:function(a,b,c){if(window.localStorage&&a){var d=window.localStorage;d[a]||(d[a]=JSON.stringify({}));var e=JSON.parse(d[a]);void 0==c?d[a]="string"==typeof b?b.trim():JSON.stringify(b):(e[b]="string"==typeof c?c.trim():JSON.stringify(c),d[a]=JSON.stringify(e))}}},event=document.createEvent("Event");event.initEvent("sendMessage",!0,!0);var sendMessage=function(a){var b=JSON.stringify(a);Live.set("bilibili_helper_message",b),document.dispatchEvent(event)};Live.setInterval(window.refreshCaptcha,function(){window.refreshCaptcha=function(){$("#captchaImg").attr("src","http://live.bilibili.com/freeSilver/getCaptcha?t="+Math.random())}},1e3),Live.setInterval(window.protocol,function(){Live.setInterval(window.protocol.SYS_MSG,function(){var a=window.protocol.SYS_MSG;window.protocol.SYS_MSG=function(b){a(b),sendMessage(b)}},500),Live.setInterval(window.protocol.SYS_GIFT,function(){var a=window.protocol.SYS_GIFT;window.protocol.SYS_GIFT=function(b){a(b),sendMessage(b)}},500)},1e3),Live.setInterval(window.liveRoomFuncs,function(){Live.setInterval(window.liveRoomFuncs.addDanmu,function(){var a=window.liveRoomFuncs.addDanmu;window.liveRoomFuncs.addDanmu=function(b){a(b),sendMessage(b)}},500),Live.setInterval(window.liveRoomFuncs.addGift,function(){var a=window.liveRoomFuncs.addGift;window.liveRoomFuncs.addGift=function(b){a(b),sendMessage(b)}},500)},1e3);